const conteudo=document.getElementById("conteudo"),rotas={"/":"pages/home.html","/sobre":"pages/sobre.html","/projetos":"pages/projetos.html","/transparencia":"pages/transparencia.html","/contato":"pages/contato.html","/cadastro":"pages/cadastro.html","/login":"pages/login.html"};async function navegar(){let a=window.location.hash.replace("#","")||"/",e=rotas[a]||rotas["/"];conteudo.innerHTML=`
    <div class="loading">
      <p>Carregando conte\xfado...</p>
    </div>
  `,conteudo.classList.remove("mostrar");try{let t=await fetch(e);if(!t.ok)throw Error("P\xe1gina n\xe3o encontrada");let o=await t.text();conteudo.innerHTML=o,setTimeout(()=>conteudo.classList.add("mostrar"),50);let r=document.querySelector("main h1")?.textContent||"Menos Tela e Mais Divers\xe3o";document.title=r,window.scrollTo({top:0,behavior:"smooth"}),carregarScriptDaPagina(a)}catch(n){conteudo.innerHTML=`
      <section class="erro">
        <h2>Ops! P\xe1gina n\xe3o encontrada ðŸ˜¢</h2>
        <p>${n.message}</p>
        <a href="#/">Voltar para a p\xe1gina inicial</a>
      </section>
    `,conteudo.classList.add("mostrar")}}function carregarScriptDaPagina(a){let e=a.replace("/","")||"index",t=`js/${e}.js`,o=document.querySelector("script[data-pagina]");o&&o.remove(),fetch(t,{method:"HEAD"}).then(a=>{if(a.ok){let o=document.createElement("script");o.src=t,o.defer=!0,o.dataset.pagina=e,o.onload=()=>{let a=`init${e.charAt(0).toUpperCase()+e.slice(1)}`,t=window[a];"function"==typeof t?(console.log(`ðŸš€ Executando ${a}()`),setTimeout(()=>{try{t()}catch(e){console.error(`âŒ Erro ao executar ${a}:`,e)}},150)):console.warn(`âš ï¸ Nenhuma fun\xe7\xe3o ${a} encontrada`)},document.body.appendChild(o)}else console.warn(`âš ï¸ Script n\xe3o encontrado: ${t}`)}).catch(a=>console.error("Erro ao carregar script:",a))}window.addEventListener("hashchange",navegar),window.addEventListener("load",()=>{window.location.hash?navegar():window.location.hash="#/"});